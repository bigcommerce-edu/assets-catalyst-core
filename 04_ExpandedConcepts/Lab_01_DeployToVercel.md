# Lab - Deploy Catalyst to Vercel

**Prerequisites**

* A command-line interface on your local machine
* The [Git](https://git-scm.com/) CLI
* An existing account on [GitHub](https://github.com/) (or your preferred Git provider), with a personal access token or SSH key configured to allow pushing to repositories from the CLI
* An existing account on [Vercel](https://vercel.com/), [connected](https://vercel.com/docs/getting-started-with-vercel/import#connect-to-your-git-provider) to your GitHub account

If you are setting up a GitHub account for the first time, see the documentation for [signing in with a passkey](https://docs.github.com/en/authentication/authenticating-with-a-passkey/signing-in-with-a-passkey) or for [](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account)[generating an SSH key](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent).

## Step 1: Push to a Remote Repository

Before deploying to Vercel, your code will first need to be under source control in a remote repository with your preferred Git provider.

1. In the root directory of your customized Catalyst project, **commit** the current state of the codebase.


```bash copy
git add .
git commit -m "My Catalyst"
```

The initial project setup should have left a local Git repository in place, but if necessary, initialize one before committing the current state:

```bash
git init
```

2. **Visit** [https://github.com](https://github.com) and **log into** your GitHub account.
3. **Create** a new repository and give it an appropriate name.

![Image](https://storage.googleapis.com/bigcommerce-production-dev-center/learning-edu/catalyst-core/github-new-repo.jpg)


4. On the front page of your new repository, find the instructions labeled **&quot;push an existing repository from the command line.&quot;** **Run** these commands in the root of your Catalyst project.
5. **Refresh** the front page of your GitHub repository to verify that your codebase has been successfully pushed to the remote repo.


## Step 2: Deploy to Vercel

### Initial Deployment

1. **Visit** [https://vercel.com](https://vercel.com).


If you have not connected a Git account, you'll have the chance to do so when you create a new project in the following steps.

2. In your Vercel dashboard, **click** Add New > Project in the top right navigation.
3. Under Import Git Repository, **import** your newly created GitHub repo with your Catalyst project.
4. After you have entered a name for the project or kept the default name, **expand** the Environment Variables section of the project configuration.

![Image](https://storage.googleapis.com/bigcommerce-production-dev-center/learning-edu/catalyst-core/vercel-env-vars.png)


5. **Enter** each of the variables found in your local file `.env.local` with the same values. You can do this by selecting the entire contents of `.env.local` and pasting in the first var `key` field.


Keep in mind that, since you've copied your local project's configuration settings, `MAKESWIFT_SITE_API_KEY` contains the API key for the developer site in your Makeswift workspace. Once you have updated the domain name of your storefront channel and Makeswift site to point to your own hosted Catalyst application, make sure to update this value with the appropriate API key.

6. **Click** Deploy.


The build and deployment process will likely take several minutes. When it's complete, follow the navigation link to visit your new storefront. You now have a working Catalyst storefront URL that can be shared publicly!

![Image](https://storage.googleapis.com/bigcommerce-production-dev-center/learning-edu/catalyst-core/vercel-deployment.png)


As you customize your Catalyst project, re-deploying to Vercel is as simple as pushing your latest Git commits to your GitHub remote repo.

### Clearing the Data Cache

Just as you cleared the Next.js Data Cache manually in your local environment, you may need to do so sometimes for your deployed Vercel project.

Navigate to Settings > Data Cache in your project to find the Purge Cache option.

## Setting Your Domain

With the completion of this hands-on lab, you have a publicly available custom Catalyst storefront with its own auto-generated Vercel domain. However, BigCommerce and Makeswift do not yet "know" about this custom domain. Any storefront links generated by BigCommerce will still be for the URL of your original preview environment.

In a real-world scenario, once you are able to configure a domain name to point to your hosted storefront, your final step would be to reconfigure your base URL settings in BigCommerce and Makeswift.

1. **Configure** the primary domain of your storefront channel to match your deployed custom front-end. This can be done in the Domains settings for your channel in the store control panel, or with the [Channel Sites](https://developer.bigcommerce.com/docs/rest-management/channels/site) capabilities of the REST Management API.
2. **Update** the checkout domain of your channel as well. Checkout strategy may vary, but to maintain the default redirected checkout experience used by Catalyst by default, configure a CNAME record for an appropriate subdomain pointing to your storefront channel's canonical URL. (For example `checkout.mystore.com`, pointing to `store-{{store_hash}}-{{channel_id}}.mybigcommerce.com`.) Set this subdomain as the checkout URL for your channel.
3. **Log into** the Makeswift editor with the "Edit in Makeswift" action in Channel Manager, then use the Host settings for your primary Makeswift site to **update** the site's URL.
4. **Update** the `MAKESWIFT_SITE_API_KEY` environment variable in your hosting environment with the API key of your primary Makeswift site.
